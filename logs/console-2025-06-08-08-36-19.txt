[2025-06-08T05:36:19.847Z] [LOG] Console logging initialized. Log file: C:\Users\PC\Desktop\DiscordBOT\Discord-BOT\logs\console-2025-06-08-08-36-19.txt
[2025-06-08T05:36:20.622Z] [LOG] [INFO][SQLite] Current server_settings columns: guild_id, name, log_channel_id, mod_log_channel_id, member_log_channel_id, message_log_channel_id, server_log_channel_id, welcome_channel_id, language, welcome_message, ticket_category_id, ticket_panel_channel_id, ticket_panel_message_id, staff_role_ids, auto_mod_enabled, auto_mod_settings, created_at, updated_at, rules_channel_id, templates, active_templates, weather_channel_id, custom_cities, weather_schedule, ticket_logs_channel_id, red_alert_channels, member_events_config, log_all_commands, ticket_chatbot_enabled, ticket_chatbot_ai_enabled, goodbye_channel_id, verification_channel_id, verification_message_id, verified_role_id, verification_type, welcome_message_config, goodbye_message_config, invite_join_message_config, invite_leave_message_config, verification_message_config, ticket_panel_config
[2025-06-08T05:36:20.623Z] [LOG] [INFO][SQLite] Database initialized successfully
[2025-06-08T05:36:20.623Z] [LOG] [INFO][Database] Database initialized successfully
[2025-06-08T05:36:20.623Z] [LOG] [INFO][Database] Running database migrations...
[2025-06-08T05:36:20.624Z] [LOG] [INFO][Database Migration] Language column already exists in server_settings table
[2025-06-08T05:36:23.233Z] [LOG] [API] Using port 3001 from environment variables or default
[2025-06-08T05:36:23.234Z] [LOG] [INFO][API] API server connected to SQLite database
[2025-06-08T05:36:23.241Z] [LOG] Registering auth router at /auth
[2025-06-08T05:36:23.241Z] [LOG] Registering warnings router at /api/warnings
[2025-06-08T05:36:23.241Z] [LOG] Registering tickets router at /api/tickets
[2025-06-08T05:36:23.241Z] [LOG] Registering servers router at /api/servers
[2025-06-08T05:36:23.309Z] [LOG] [INFO][SQLite] Current server_settings columns: guild_id, name, log_channel_id, mod_log_channel_id, member_log_channel_id, message_log_channel_id, server_log_channel_id, welcome_channel_id, language, welcome_message, ticket_category_id, ticket_panel_channel_id, ticket_panel_message_id, staff_role_ids, auto_mod_enabled, auto_mod_settings, created_at, updated_at, rules_channel_id, templates, active_templates, weather_channel_id, custom_cities, weather_schedule, ticket_logs_channel_id, red_alert_channels, member_events_config, log_all_commands, ticket_chatbot_enabled, ticket_chatbot_ai_enabled, goodbye_channel_id, verification_channel_id, verification_message_id, verified_role_id, verification_type, welcome_message_config, goodbye_message_config, invite_join_message_config, invite_leave_message_config, verification_message_config, ticket_panel_config
[2025-06-08T05:36:23.310Z] [LOG] [INFO][SQLite] Database initialized successfully
[2025-06-08T05:36:23.310Z] [LOG] [INFO][Database] Database initialized successfully
[2025-06-08T05:36:23.310Z] [LOG] [INFO][Database] Running database migrations...
[2025-06-08T05:36:23.310Z] [LOG] [INFO][Database Migration] Language column already exists in server_settings table
[2025-06-08T05:36:23.311Z] [LOG] [DASHBOARD] Successfully loaded database and client utilities
[2025-06-08T05:36:23.311Z] [LOG] Registering dashboard router at /api/dashboard
[2025-06-08T05:36:23.353Z] [LOG] [INFO][Database] Connected to SQLite database successfully
[2025-06-08T05:36:23.355Z] [LOG] [INFO][Migration] rules_channel_id column already exists in server_settings table
[2025-06-08T05:36:23.355Z] [LOG] [INFO][Migration] rules_channel_id column already exists in server_settings table
[2025-06-08T05:36:23.355Z] [LOG] [INFO][Migration] templates column already exists in server_settings table
[2025-06-08T05:36:23.356Z] [LOG] [INFO][Migration] active_templates column already exists in server_settings table
[2025-06-08T05:36:23.356Z] [LOG] [INFO][Migration] templates column already exists in server_settings table
[2025-06-08T05:36:23.356Z] [LOG] [INFO][Migration] active_templates column already exists in server_settings table
[2025-06-08T05:36:23.357Z] [LOG] [INFO][Database Migration] weather_channel_id column already exists in server_settings table
[2025-06-08T05:36:23.357Z] [LOG] [INFO][Database Migration] weather_channel_id column already exists in server_settings table
[2025-06-08T05:36:23.357Z] [LOG] Connected to database
[2025-06-08T05:36:23.357Z] [LOG] [API] Attempting to start API server on port 3001...
[2025-06-08T05:36:23.378Z] [LOG] [INFO][Migration] ticket_action_logs table migration completed successfully
[2025-06-08T05:36:23.379Z] [LOG] [INFO][Migration] ticket_action_logs table migration completed successfully
[2025-06-08T05:36:24.388Z] [LOG] [INFO][Database Migration] Category column already exists in tickets table
[2025-06-08T05:36:24.388Z] [LOG] [INFO][Database Migration] ticket_categories table already exists
[2025-06-08T05:36:25.403Z] [LOG] [INFO][Migration] custom_cities column already exists in server_settings table
[2025-06-08T05:36:26.467Z] [LOG] [INFO][Migration] weather_schedule column already exists in server_settings table
[2025-06-08T05:36:28.541Z] [LOG] [INFO][Migration] log_channels table already exists
[2025-06-08T05:36:28.541Z] [LOG] [INFO][Migration] ticket_logs_channel_id column already exists in server_settings table
[2025-06-08T05:36:28.541Z] [LOG] [INFO][Migration] ticket_logs_channel_id column already exists in server_settings table
[2025-06-08T05:36:28.541Z] [LOG] Ticket categories migration completed successfully
[2025-06-08T05:36:28.541Z] [LOG] add-ticket-categories migration loaded
[2025-06-08T05:36:28.542Z] [LOG] add-custom-cities migration loaded
[2025-06-08T05:36:28.542Z] [LOG] add-weather-schedule migration loaded
[2025-06-08T05:36:28.542Z] [LOG] add-ticket-last-activity migration loaded
[2025-06-08T05:36:28.542Z] [LOG] add-ticket-case-number migration loaded
[2025-06-08T05:36:28.542Z] [LOG] add-soft-delete-column migration loaded
[2025-06-08T05:36:28.542Z] [LOG] fix-dm-logs-table migration loaded
[2025-06-08T05:36:28.542Z] [LOG] add-log-channels migration loaded
[2025-06-08T05:36:28.542Z] [LOG] [INFO][Migration] Completed log_channels table migration
[2025-06-08T05:36:28.542Z] [LOG] ensure-log-channels migration loaded
[2025-06-08T05:36:28.542Z] [LOG] [INFO][Migration] red_alert_channels column already exists in server_settings table
[2025-06-08T05:36:28.542Z] [LOG] [INFO][Migration] red_alert_channels column already exists in server_settings table
[2025-06-08T05:36:28.543Z] [LOG] Creating log_channels table...
[2025-06-08T05:36:28.543Z] [LOG] Created log_channels table
[2025-06-08T05:36:28.543Z] [LOG] [INFO][Database Migration] Log channels table migration completed successfully
[2025-06-08T05:36:28.543Z] [LOG] [INFO][Migration] Notes column already exists in tickets table
[2025-06-08T05:36:28.543Z] [LOG] Creating log_channels table...
[2025-06-08T05:36:28.543Z] [LOG] Created log_channels table
[2025-06-08T05:36:28.543Z] [LOG] [INFO][Database Migration] Log channels table migration completed successfully
[2025-06-08T05:36:28.543Z] [LOG] [INFO][Migration] Notes column already exists in tickets table
[2025-06-08T05:36:28.543Z] [LOG] [INFO][Database Migration] Ticket notes column migration completed successfully
[2025-06-08T05:36:28.543Z] [LOG] [INFO][Database Migration] Adding users table...
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Database Migration] Users table already exists
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Database Migration] Ticket notes column migration completed successfully
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Database Migration] Adding users table...
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Database Migration] Users table already exists
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Database Migration] Users table migration completed successfully
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Migration] last_activity_at column already exists or could not be added
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Migration] Status column exists, will use new status values in code
[2025-06-08T05:36:28.544Z] [LOG] [INFO][Migration] Created or verified ticket_action_logs table
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Migration] Created or verified ticket_staff_activity table
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Migration] Successfully completed ticket status migration
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Database Migration] Users table migration completed successfully
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Migration] last_activity_at column already exists or could not be added
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Migration] Status column exists, will use new status values in code
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Migration] Created or verified ticket_action_logs table
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Migration] Created or verified ticket_staff_activity table
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Migration] Successfully completed ticket status migration
[2025-06-08T05:36:28.545Z] [LOG] [INFO][Database Migration] Ticket status migration completed successfully
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Migration] last_activity_at column already exists in tickets table
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Migration] Successfully completed ticket last_activity migration
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Database Migration] Ticket status migration completed successfully
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Migration] last_activity_at column already exists in tickets table
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Migration] Successfully completed ticket last_activity migration
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Database Migration] Ticket last activity column migration completed successfully
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Migration] Successfully created ticket_staff_activity table
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Database Migration] Ticket last activity column migration completed successfully
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Migration] Successfully created ticket_staff_activity table
[2025-06-08T05:36:28.546Z] [LOG] [INFO][Database Migration] Ticket staff activity table migration completed successfully
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Staff Activity Migration] ticket_staff_activity table already exists
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Staff Activity Migration] Migration completed successfully
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Database Migration] Ticket staff activity table migration completed successfully
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Staff Activity Migration] ticket_staff_activity table already exists
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Staff Activity Migration] Migration completed successfully
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Database Migration] Ticket staff activity table creation completed successfully
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Migration] action_type column already exists in ticket_staff_activity table
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Database Migration] Ticket staff activity table creation completed successfully
[2025-06-08T05:36:28.547Z] [LOG] [INFO][Migration] action_type column already exists in ticket_staff_activity table
[2025-06-08T05:36:28.548Z] [LOG] [INFO][Database Migration] Added action_type column to ticket_staff_activity table
[2025-06-08T05:36:28.548Z] [LOG] [INFO][Migration] Successfully created ticket_transcripts table
[2025-06-08T05:36:28.548Z] [LOG] [INFO][Database Migration] Added action_type column to ticket_staff_activity table
[2025-06-08T05:36:28.548Z] [LOG] [INFO][Migration] Successfully created ticket_transcripts table
[2025-06-08T05:36:28.548Z] [LOG] [INFO][Database Migration] Ticket transcripts table migration completed successfully
[2025-06-08T05:36:28.548Z] [LOG] [INFO][Migration] case_number column already exists in tickets table
[2025-06-08T05:36:28.549Z] [LOG] [INFO][Migration] Successfully completed ticket case number migration
[2025-06-08T05:36:28.549Z] [LOG] [INFO][Database Migration] Ticket transcripts table migration completed successfully
[2025-06-08T05:36:28.549Z] [LOG] [INFO][Migration] case_number column already exists in tickets table
[2025-06-08T05:36:28.549Z] [LOG] [INFO][Migration] Successfully completed ticket case number migration
[2025-06-08T05:36:28.549Z] [LOG] [INFO][Database Migration] Ticket case number migration completed successfully
[2025-06-08T05:36:28.549Z] [LOG] [INFO][Migration] deleted column already exists in tickets table
[2025-06-08T05:36:28.549Z] [LOG] [INFO][Migration] Successfully completed soft delete migration
[2025-06-08T05:36:28.550Z] [LOG] [INFO][Database Migration] Ticket case number migration completed successfully
[2025-06-08T05:36:28.550Z] [LOG] [INFO][Migration] deleted column already exists in tickets table
[2025-06-08T05:36:28.550Z] [LOG] [INFO][Migration] Successfully completed soft delete migration
[2025-06-08T05:36:28.550Z] [LOG] [INFO][Database Migration] Ticket soft delete column migration completed successfully
[2025-06-08T05:36:28.550Z] [LOG] [INFO][Migration] dashboard_logs table already exists, checking and adding missing columns...
[2025-06-08T05:36:28.551Z] [LOG] [INFO][Database Migration] Ticket soft delete column migration completed successfully
[2025-06-08T05:36:28.551Z] [LOG] [INFO][Migration] dashboard_logs table already exists, checking and adding missing columns...
[2025-06-08T05:36:28.551Z] [LOG] [INFO][Database Migration] Dashboard logs table migration completed successfully
[2025-06-08T05:36:28.551Z] [LOG] [INFO][Database Migration] Dashboard logs table migration completed successfully
[2025-06-08T05:36:28.552Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:28.552Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:28.552Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Database Migration] dm_logs table migration completed successfully
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Database] Database migrations completed successfully
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Database Migration] dm_logs table migration completed successfully
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Database] Database migrations completed successfully
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Database] Migrations completed successfully
[2025-06-08T05:36:28.553Z] [LOG] [INFO][Database] Server settings updated with channel IDs
[2025-06-08T05:36:28.554Z] [LOG] [INFO][Database] Migrations completed successfully
[2025-06-08T05:36:28.554Z] [LOG] [INFO][Database] Server settings updated with channel IDs
[2025-06-08T05:36:28.554Z] [LOG] [INFO][API] API server running successfully on port 3001
[2025-06-08T05:36:28.554Z] [LOG] [API] API URL: http://localhost:3001
[2025-06-08T05:36:28.554Z] [LOG] [WebSocket] WebSocket server running on ws://localhost:3001
[2025-06-08T05:36:28.555Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:28.555Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:28.555Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
[2025-06-08T05:36:28.555Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:28.555Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:28.555Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
[2025-06-08T05:36:29.520Z] [LOG] [INFO][Bot] 🚀 Ready! Logged in as BotAI#6384
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot] 📊 Guild: vShop - החנות האמינה בארץ! (1180940682626600960)
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ Manage Guild: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ View Audit Log: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ View Channel: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ Send Messages: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ Member Count: 864
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot] 📊 Guild: Coding API (1365777891333374022)
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ Manage Guild: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ View Audit Log: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ View Channel: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ Send Messages: ✅
[2025-06-08T05:36:29.521Z] [LOG] [INFO][Bot]    └─ Member Count: 3
[2025-06-08T05:36:29.522Z] [LOG] [INFO][Bot] 🔧 Initializing unified member handler (replaces invite tracker + member events)...
[2025-06-08T05:36:29.634Z] [LOG] [INFO][UnifiedMemberHandler] 🔧 Starting unified member handler initialization...
[2025-06-08T05:36:29.634Z] [LOG] [INFO][UnifiedMemberHandler] Bot has GuildMembers intent: true
[2025-06-08T05:36:29.634Z] [LOG] [INFO][UnifiedMemberHandler] Bot has Guilds intent: true
[2025-06-08T05:36:29.634Z] [LOG] [INFO][UnifiedMemberHandler] 🔍 Total event listeners registered for GuildMemberAdd: 1
[2025-06-08T05:36:29.634Z] [LOG] [INFO][UnifiedMemberHandler] 🔍 Total event listeners registered for GuildMemberRemove: 1
[2025-06-08T05:36:29.634Z] [LOG] [INFO][UnifiedMemberHandler] ✅ Unified member handler initialized successfully
[2025-06-08T05:36:29.634Z] [LOG] [INFO][Bot] ✅ Unified member handler initialized successfully
[2025-06-08T05:36:29.635Z] [LOG] [INFO][Bot] 📋 Starting command initialization in background...
[2025-06-08T05:36:29.635Z] [LOG] [Command Initializer] Starting command initialization...
[2025-06-08T05:36:29.635Z] [LOG] [Command Initializer] Cleared existing command collection
[2025-06-08T05:36:29.635Z] [LOG] [Command Loader] Loading commands from: C:\Users\PC\Desktop\DiscordBOT\Discord-BOT\dist\commands
[2025-06-08T05:36:29.635Z] [LOG] Found command folders: admin, general, index.js, moderation, utility
[2025-06-08T05:36:29.635Z] [LOG] Processing command folder: admin
[2025-06-08T05:36:29.636Z] [LOG] Found 39 command files in admin
[2025-06-08T05:36:29.636Z] [LOG] Processing command folder: general
[2025-06-08T05:36:29.636Z] [LOG] Found 1 command files in general
[2025-06-08T05:36:29.636Z] [LOG] Skipping non-directory: C:\Users\PC\Desktop\DiscordBOT\Discord-BOT\dist\commands\index.js
[2025-06-08T05:36:29.636Z] [LOG] Processing command folder: moderation
[2025-06-08T05:36:29.636Z] [LOG] Found 12 command files in moderation
[2025-06-08T05:36:29.637Z] [LOG] Processing command folder: utility
[2025-06-08T05:36:29.637Z] [LOG] Found 7 command files in utility
[2025-06-08T05:36:29.671Z] [LOG] Console logging initialized. Log file: C:\Users\PC\Desktop\DiscordBOT\Discord-BOT\logs\console-2025-06-08-08-36-29.txt
[2025-06-08T05:36:29.684Z] [LOG] [API] Using port 3001 from environment variables or default
[2025-06-08T05:36:29.684Z] [LOG] [INFO][API] API server connected to SQLite database
[2025-06-08T05:36:29.685Z] [LOG] Registering auth router at /auth
[2025-06-08T05:36:29.686Z] [LOG] Registering warnings router at /api/warnings
[2025-06-08T05:36:29.686Z] [LOG] Registering tickets router at /api/tickets
[2025-06-08T05:36:29.686Z] [LOG] Registering servers router at /api/servers
[2025-06-08T05:36:29.689Z] [LOG] [DASHBOARD] Successfully loaded database and client utilities
[2025-06-08T05:36:29.690Z] [LOG] Registering dashboard router at /api/dashboard
[2025-06-08T05:36:29.692Z] [LOG] [INFO][Database] Connected to SQLite database successfully
[2025-06-08T05:36:29.697Z] [LOG] [INFO][Rules Manager] Server rules table created or already exists
[2025-06-08T05:36:29.858Z] [LOG] Successfully loaded command: check-chatbot-status
[2025-06-08T05:36:29.858Z] [LOG] Successfully loaded command: command-logs
[2025-06-08T05:36:29.858Z] [LOG] Successfully loaded command: dm-logs
[2025-06-08T05:36:29.858Z] [LOG] [INFO][FAQ Manager] FAQ table created or already exists
[2025-06-08T05:36:29.858Z] [LOG] Successfully loaded command: faq-manager
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: force-log
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: invite-leaderboard
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: invite-stats
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: list-redalert
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: logs
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: setup-member-events
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: nuke
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: remove-redalert
[2025-06-08T05:36:29.859Z] [LOG] Successfully loaded command: reset-staff-table
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: roles-setup
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: rules-manager
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: server-cleanup
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: server-setup
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: set-weather-channel
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: set-weather-schedule
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: setup-logs
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: setup-redalert
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: ticket-setup-logs
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: setup-wizard
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: test-chatbot
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: test-events
[2025-06-08T05:36:29.860Z] [LOG] Successfully loaded command: test-logs
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: test-verification
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: ticket-add-user
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: ticket-cleanup
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: ticket-config
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: ticket-debug
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: ticket-logs
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: ticket-priority
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: ticket-remove-user
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: toggle-ai-chatbot
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: toggle-command-logging
[2025-06-08T05:36:29.861Z] [LOG] Successfully loaded command: verification-setup
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: verify-logs
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: welcome-setup
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: verify
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: ban
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: dm
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: kick
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: removewarn
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: setlogchannel
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: ticket-staff-message
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: staff-stats
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: ticket-rate
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: ticket-status
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: timeout
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: warn
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: warnings
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: chatbot
[2025-06-08T05:36:29.862Z] [LOG] Successfully loaded command: help
[2025-06-08T05:36:29.863Z] [LOG] Successfully loaded command: invite
[2025-06-08T05:36:29.863Z] [LOG] Successfully loaded command: invites
[2025-06-08T05:36:29.863Z] [LOG] Successfully loaded command: language
[2025-06-08T05:36:29.863Z] [LOG] Successfully loaded command: serverinfo
[2025-06-08T05:36:29.863Z] [LOG] Successfully loaded command: weather
[2025-06-08T05:36:29.863Z] [LOG] Connected to database
[2025-06-08T05:36:29.864Z] [LOG] Loaded 59 commands in total
[2025-06-08T05:36:29.865Z] [LOG] [INFO][Database Migration] Category column already exists in tickets table
[2025-06-08T05:36:29.865Z] [LOG] [INFO][Database Migration] ticket_categories table already exists
[2025-06-08T05:36:29.866Z] [LOG] [INFO][Migration] custom_cities column already exists in server_settings table
[2025-06-08T05:36:29.867Z] [LOG] [INFO][Migration] weather_schedule column already exists in server_settings table
[2025-06-08T05:36:29.868Z] [LOG] [INFO][Migration] log_channels table already exists
[2025-06-08T05:36:29.869Z] [LOG] [Command Initializer] Successfully loaded 59 commands from files
[2025-06-08T05:36:29.869Z] [LOG] [Command Initializer] Registered 59 commands to client
[2025-06-08T05:36:29.869Z] [LOG] [Command Initializer] Registering commands with Discord...
[2025-06-08T05:36:29.869Z] [LOG] [Command Register] Starting registration of 59 commands...
[2025-06-08T05:36:29.870Z] [LOG] [Command Register] Clearing existing commands...
[2025-06-08T05:36:29.870Z] [LOG] Ticket categories migration completed successfully
[2025-06-08T05:36:29.870Z] [LOG] add-ticket-categories migration loaded
[2025-06-08T05:36:29.870Z] [LOG] add-custom-cities migration loaded
[2025-06-08T05:36:29.870Z] [LOG] add-weather-schedule migration loaded
[2025-06-08T05:36:29.870Z] [LOG] add-ticket-last-activity migration loaded
[2025-06-08T05:36:29.870Z] [LOG] add-ticket-case-number migration loaded
[2025-06-08T05:36:29.870Z] [LOG] add-soft-delete-column migration loaded
[2025-06-08T05:36:29.870Z] [LOG] fix-dm-logs-table migration loaded
[2025-06-08T05:36:29.871Z] [LOG] add-log-channels migration loaded
[2025-06-08T05:36:29.871Z] [LOG] [INFO][Migration] Completed log_channels table migration
[2025-06-08T05:36:29.871Z] [LOG] ensure-log-channels migration loaded
[2025-06-08T05:36:30.128Z] [LOG] [Command Register] Successfully cleared existing commands
[2025-06-08T05:36:30.128Z] [LOG] [Command Register] Started refreshing application (/) commands.
[2025-06-08T05:36:30.128Z] [LOG] Deduplication: 59 commands reduced to 59 unique commands
[2025-06-08T05:36:30.129Z] [LOG] Registering 59 commands globally for all servers...
[2025-06-08T05:36:30.757Z] [LOG] [INFO][Bot] 🚀 Ready! Logged in as BotAI#6384
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot] 📊 Guild: vShop - החנות האמינה בארץ! (1180940682626600960)
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ Manage Guild: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ View Audit Log: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ View Channel: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ Send Messages: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ Member Count: 864
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot] 📊 Guild: Coding API (1365777891333374022)
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ Manage Guild: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ View Audit Log: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ View Channel: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ Send Messages: ✅
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot]    └─ Member Count: 3
[2025-06-08T05:36:30.758Z] [LOG] [INFO][Bot] 🔧 Initializing unified member handler (replaces invite tracker + member events)...
[2025-06-08T05:36:30.760Z] [LOG] [INFO][UnifiedMemberHandler] 🔧 Starting unified member handler initialization...
[2025-06-08T05:36:30.760Z] [LOG] [INFO][UnifiedMemberHandler] Bot has GuildMembers intent: true
[2025-06-08T05:36:30.760Z] [LOG] [INFO][UnifiedMemberHandler] Bot has Guilds intent: true
[2025-06-08T05:36:30.761Z] [LOG] [INFO][UnifiedMemberHandler] 🔍 Total event listeners registered for GuildMemberAdd: 1
[2025-06-08T05:36:30.761Z] [LOG] [INFO][UnifiedMemberHandler] 🔍 Total event listeners registered for GuildMemberRemove: 1
[2025-06-08T05:36:30.761Z] [LOG] [INFO][UnifiedMemberHandler] ✅ Unified member handler initialized successfully
[2025-06-08T05:36:30.761Z] [LOG] [INFO][Bot] ✅ Unified member handler initialized successfully
[2025-06-08T05:36:30.761Z] [LOG] [INFO][Bot] 📋 Starting command initialization in background...
[2025-06-08T05:36:30.761Z] [LOG] [Command Initializer] Starting command initialization...
[2025-06-08T05:36:30.761Z] [LOG] [Command Initializer] Cleared existing command collection
[2025-06-08T05:36:30.761Z] [LOG] [Command Loader] Loading commands from: C:\Users\PC\Desktop\DiscordBOT\Discord-BOT\dist\commands
[2025-06-08T05:36:30.761Z] [LOG] Found command folders: admin, general, index.js, moderation, utility
[2025-06-08T05:36:30.762Z] [LOG] Processing command folder: admin
[2025-06-08T05:36:30.762Z] [LOG] Found 39 command files in admin
[2025-06-08T05:36:30.762Z] [LOG] Processing command folder: general
[2025-06-08T05:36:30.762Z] [LOG] Found 1 command files in general
[2025-06-08T05:36:30.762Z] [LOG] Skipping non-directory: C:\Users\PC\Desktop\DiscordBOT\Discord-BOT\dist\commands\index.js
[2025-06-08T05:36:30.762Z] [LOG] Processing command folder: moderation
[2025-06-08T05:36:30.763Z] [LOG] Found 12 command files in moderation
[2025-06-08T05:36:30.763Z] [LOG] Processing command folder: utility
[2025-06-08T05:36:30.763Z] [LOG] Found 7 command files in utility
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: check-chatbot-status
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: command-logs
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: dm-logs
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: faq-manager
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: force-log
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: invite-leaderboard
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: invite-stats
[2025-06-08T05:36:30.764Z] [LOG] Successfully loaded command: list-redalert
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: logs
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: setup-member-events
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: nuke
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: remove-redalert
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: reset-staff-table
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: roles-setup
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: rules-manager
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: server-cleanup
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: server-setup
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: set-weather-channel
[2025-06-08T05:36:30.765Z] [LOG] Successfully loaded command: set-weather-schedule
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: setup-logs
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: setup-redalert
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-setup-logs
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: setup-wizard
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: test-chatbot
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: test-events
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: test-logs
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: test-verification
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-add-user
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-cleanup
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-config
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-debug
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-logs
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-priority
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: ticket-remove-user
[2025-06-08T05:36:30.766Z] [LOG] Successfully loaded command: toggle-ai-chatbot
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: toggle-command-logging
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: verification-setup
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: verify-logs
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: welcome-setup
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: verify
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: ban
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: dm
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: kick
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: removewarn
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: setlogchannel
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: ticket-staff-message
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: staff-stats
[2025-06-08T05:36:30.767Z] [LOG] Successfully loaded command: ticket-rate
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: ticket-status
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: timeout
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: warn
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: warnings
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: chatbot
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: help
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: invite
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: invites
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: language
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: serverinfo
[2025-06-08T05:36:30.768Z] [LOG] Successfully loaded command: weather
[2025-06-08T05:36:30.768Z] [LOG] Loaded 59 commands in total
[2025-06-08T05:36:30.768Z] [LOG] [Command Initializer] Successfully loaded 59 commands from files
[2025-06-08T05:36:30.768Z] [LOG] [Command Initializer] Registered 59 commands to client
[2025-06-08T05:36:30.769Z] [LOG] [Command Initializer] Registering commands with Discord...
[2025-06-08T05:36:30.769Z] [LOG] [Command Register] Starting registration of 59 commands...
[2025-06-08T05:36:30.769Z] [LOG] [Command Register] Clearing existing commands...
[2025-06-08T05:37:00.140Z] [WARN] [Command Register] Command registration timed out, but continuing with bot startup...
[2025-06-08T05:37:00.140Z] [WARN] [Command Register] Commands may still be registering in the background.
[2025-06-08T05:37:00.140Z] [LOG] Command registration complete.
[2025-06-08T05:37:00.140Z] [LOG] [Command Initializer] Commands initialized and registered successfully
[2025-06-08T05:37:00.140Z] [LOG] [INFO][Bot] Commands loaded into memory successfully
[2025-06-08T05:37:00.141Z] [LOG] [INFO][Bot] Bot initialization completed successfully
[2025-06-08T05:37:10.692Z] [LOG] [Command Register] Successfully cleared existing commands
[2025-06-08T05:37:10.692Z] [LOG] [Command Register] Started refreshing application (/) commands.
[2025-06-08T05:37:10.692Z] [LOG] Deduplication: 59 commands reduced to 59 unique commands
[2025-06-08T05:37:10.693Z] [LOG] Registering 59 commands globally for all servers...
[2025-06-08T05:37:40.700Z] [WARN] [Command Register] Command registration timed out, but continuing with bot startup...
[2025-06-08T05:37:40.700Z] [WARN] [Command Register] Commands may still be registering in the background.
[2025-06-08T05:37:40.700Z] [LOG] Command registration complete.
[2025-06-08T05:37:40.700Z] [LOG] [Command Initializer] Commands initialized and registered successfully
[2025-06-08T05:37:40.701Z] [LOG] [INFO][Bot] Commands loaded into memory successfully
[2025-06-08T05:37:40.701Z] [LOG] [INFO][Bot] Bot initialization completed successfully
[2025-06-08T09:45:33.071Z] [LOG] [INFO][API] Starting transcript regeneration via API request
[2025-06-08T09:45:33.071Z] [LOG] [INFO][TranscriptManagement] Starting missing transcript regeneration process...
[2025-06-08T09:45:33.071Z] [LOG] [INFO][TranscriptManagement] Found 13 tickets without stored transcripts
[2025-06-08T09:45:33.072Z] [LOG] [INFO][TranscriptManagement] Processing ticket #22 (ID: 32)
[2025-06-08T09:45:33.414Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #22
[2025-06-08T09:45:33.414Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #22
[2025-06-08T09:45:33.415Z] [LOG] [INFO][TranscriptManagement] Processing ticket #19 (ID: 29)
[2025-06-08T09:45:33.757Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #19
[2025-06-08T09:45:33.757Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #19
[2025-06-08T09:45:33.757Z] [LOG] [INFO][TranscriptManagement] Processing ticket #18 (ID: 28)
[2025-06-08T09:45:33.996Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #18
[2025-06-08T09:45:33.996Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #18
[2025-06-08T09:45:33.996Z] [LOG] [INFO][TranscriptManagement] Processing ticket #15 (ID: 25)
[2025-06-08T09:45:34.234Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #15
[2025-06-08T09:45:34.234Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #15
[2025-06-08T09:45:34.234Z] [LOG] [INFO][TranscriptManagement] Processing ticket #14 (ID: 24)
[2025-06-08T09:45:34.493Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #14
[2025-06-08T09:45:34.493Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #14
[2025-06-08T09:45:34.493Z] [LOG] [INFO][TranscriptManagement] Processing ticket #13 (ID: 23)
[2025-06-08T09:45:34.734Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #13
[2025-06-08T09:45:34.734Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #13
[2025-06-08T09:45:34.734Z] [LOG] [INFO][TranscriptManagement] Processing ticket #12 (ID: 22)
[2025-06-08T09:45:34.993Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #12
[2025-06-08T09:45:34.993Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #12
[2025-06-08T09:45:34.994Z] [LOG] [INFO][TranscriptManagement] Processing ticket #9 (ID: 19)
[2025-06-08T09:45:35.270Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #9
[2025-06-08T09:45:35.270Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #9
[2025-06-08T09:45:35.270Z] [LOG] [INFO][TranscriptManagement] Processing ticket #6 (ID: 16)
[2025-06-08T09:45:35.588Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #6
[2025-06-08T09:45:35.588Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #6
[2025-06-08T09:45:35.588Z] [LOG] [INFO][TranscriptManagement] Processing ticket #4 (ID: 14)
[2025-06-08T09:45:35.848Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #4
[2025-06-08T09:45:35.848Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #4
[2025-06-08T09:45:35.848Z] [LOG] [INFO][TranscriptManagement] Processing ticket #3 (ID: 13)
[2025-06-08T09:45:36.299Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #3
[2025-06-08T09:45:36.299Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #3
[2025-06-08T09:45:36.299Z] [LOG] [INFO][TranscriptManagement] Processing ticket #2 (ID: 12)
[2025-06-08T09:45:36.583Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #2
[2025-06-08T09:45:36.583Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #2
[2025-06-08T09:45:36.583Z] [LOG] [INFO][TranscriptManagement] Processing ticket #1 (ID: 11)
[2025-06-08T09:45:36.849Z] [LOG] [INFO][TicketTranscriptService] Saved transcript for ticket #1
[2025-06-08T09:45:36.849Z] [LOG] [INFO][TranscriptManagement] Created placeholder transcript for ticket #1
[2025-06-08T09:45:36.850Z] [LOG] [INFO][TranscriptManagement] Transcript regeneration completed. Processed: 13, Generated: 13, Errors: 0
[2025-06-08T09:45:49.939Z] [LOG] [INFO][API] Retrieved stored transcript for ticket #1
[2025-06-08T09:47:11.713Z] [LOG] Received SIGINT. Graceful shutdown ...
