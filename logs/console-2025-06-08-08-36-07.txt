[2025-06-08T05:36:07.042Z] [LOG] Console logging initialized. Log file: C:\Users\PC\Desktop\DiscordBOT\Discord-BOT\logs\console-2025-06-08-08-36-07.txt
[2025-06-08T05:36:07.828Z] [LOG] [INFO][SQLite] Current server_settings columns: guild_id, name, log_channel_id, mod_log_channel_id, member_log_channel_id, message_log_channel_id, server_log_channel_id, welcome_channel_id, language, welcome_message, ticket_category_id, ticket_panel_channel_id, ticket_panel_message_id, staff_role_ids, auto_mod_enabled, auto_mod_settings, created_at, updated_at, rules_channel_id, templates, active_templates, weather_channel_id, custom_cities, weather_schedule, ticket_logs_channel_id, red_alert_channels, member_events_config, log_all_commands, ticket_chatbot_enabled, ticket_chatbot_ai_enabled, goodbye_channel_id, verification_channel_id, verification_message_id, verified_role_id, verification_type, welcome_message_config, goodbye_message_config, invite_join_message_config, invite_leave_message_config, verification_message_config, ticket_panel_config
[2025-06-08T05:36:07.829Z] [LOG] [INFO][SQLite] Database initialized successfully
[2025-06-08T05:36:07.829Z] [LOG] [INFO][Database] Database initialized successfully
[2025-06-08T05:36:07.829Z] [LOG] [INFO][Database] Running database migrations...
[2025-06-08T05:36:07.829Z] [LOG] [INFO][Database Migration] Language column already exists in server_settings table
[2025-06-08T05:36:10.397Z] [LOG] [API] Using port 3001 from environment variables or default
[2025-06-08T05:36:10.397Z] [LOG] [INFO][API] API server connected to SQLite database
[2025-06-08T05:36:10.403Z] [LOG] Registering auth router at /auth
[2025-06-08T05:36:10.403Z] [LOG] Registering warnings router at /api/warnings
[2025-06-08T05:36:10.404Z] [LOG] Registering tickets router at /api/tickets
[2025-06-08T05:36:10.404Z] [LOG] Registering servers router at /api/servers
[2025-06-08T05:36:10.475Z] [LOG] [INFO][SQLite] Current server_settings columns: guild_id, name, log_channel_id, mod_log_channel_id, member_log_channel_id, message_log_channel_id, server_log_channel_id, welcome_channel_id, language, welcome_message, ticket_category_id, ticket_panel_channel_id, ticket_panel_message_id, staff_role_ids, auto_mod_enabled, auto_mod_settings, created_at, updated_at, rules_channel_id, templates, active_templates, weather_channel_id, custom_cities, weather_schedule, ticket_logs_channel_id, red_alert_channels, member_events_config, log_all_commands, ticket_chatbot_enabled, ticket_chatbot_ai_enabled, goodbye_channel_id, verification_channel_id, verification_message_id, verified_role_id, verification_type, welcome_message_config, goodbye_message_config, invite_join_message_config, invite_leave_message_config, verification_message_config, ticket_panel_config
[2025-06-08T05:36:10.476Z] [LOG] [INFO][SQLite] Database initialized successfully
[2025-06-08T05:36:10.476Z] [LOG] [INFO][Database] Database initialized successfully
[2025-06-08T05:36:10.476Z] [LOG] [INFO][Database] Running database migrations...
[2025-06-08T05:36:10.477Z] [LOG] [INFO][Database Migration] Language column already exists in server_settings table
[2025-06-08T05:36:10.477Z] [LOG] [DASHBOARD] Successfully loaded database and client utilities
[2025-06-08T05:36:10.477Z] [LOG] Registering dashboard router at /api/dashboard
[2025-06-08T05:36:10.523Z] [LOG] [INFO][Database] Connected to SQLite database successfully
[2025-06-08T05:36:10.525Z] [LOG] [INFO][Migration] rules_channel_id column already exists in server_settings table
[2025-06-08T05:36:10.525Z] [LOG] [INFO][Migration] rules_channel_id column already exists in server_settings table
[2025-06-08T05:36:10.526Z] [LOG] [INFO][Migration] templates column already exists in server_settings table
[2025-06-08T05:36:10.526Z] [LOG] [INFO][Migration] active_templates column already exists in server_settings table
[2025-06-08T05:36:10.526Z] [LOG] [INFO][Migration] templates column already exists in server_settings table
[2025-06-08T05:36:10.526Z] [LOG] [INFO][Migration] active_templates column already exists in server_settings table
[2025-06-08T05:36:10.527Z] [LOG] [INFO][Database Migration] weather_channel_id column already exists in server_settings table
[2025-06-08T05:36:10.527Z] [LOG] [INFO][Database Migration] weather_channel_id column already exists in server_settings table
[2025-06-08T05:36:10.527Z] [LOG] Connected to database
[2025-06-08T05:36:10.528Z] [LOG] [API] Attempting to start API server on port 3001...
[2025-06-08T05:36:10.548Z] [LOG] [INFO][Migration] ticket_action_logs table migration completed successfully
[2025-06-08T05:36:10.549Z] [LOG] [INFO][Migration] ticket_action_logs table migration completed successfully
[2025-06-08T05:36:11.739Z] [LOG] [INFO][Database Migration] Category column already exists in tickets table
[2025-06-08T05:36:11.739Z] [LOG] [INFO][Database Migration] ticket_categories table already exists
[2025-06-08T05:36:13.017Z] [LOG] [INFO][Migration] custom_cities column already exists in server_settings table
[2025-06-08T05:36:14.246Z] [LOG] [INFO][Migration] weather_schedule column already exists in server_settings table
[2025-06-08T05:36:16.746Z] [LOG] [INFO][Migration] log_channels table already exists
[2025-06-08T05:36:16.747Z] [LOG] [INFO][Migration] ticket_logs_channel_id column already exists in server_settings table
[2025-06-08T05:36:16.747Z] [LOG] [INFO][Migration] ticket_logs_channel_id column already exists in server_settings table
[2025-06-08T05:36:16.748Z] [LOG] Ticket categories migration completed successfully
[2025-06-08T05:36:16.748Z] [LOG] add-ticket-categories migration loaded
[2025-06-08T05:36:16.748Z] [LOG] add-custom-cities migration loaded
[2025-06-08T05:36:16.748Z] [LOG] add-weather-schedule migration loaded
[2025-06-08T05:36:16.748Z] [LOG] add-ticket-last-activity migration loaded
[2025-06-08T05:36:16.748Z] [LOG] add-ticket-case-number migration loaded
[2025-06-08T05:36:16.748Z] [LOG] add-soft-delete-column migration loaded
[2025-06-08T05:36:16.748Z] [LOG] fix-dm-logs-table migration loaded
[2025-06-08T05:36:16.748Z] [LOG] add-log-channels migration loaded
[2025-06-08T05:36:16.748Z] [LOG] [INFO][Migration] Completed log_channels table migration
[2025-06-08T05:36:16.748Z] [LOG] ensure-log-channels migration loaded
[2025-06-08T05:36:16.749Z] [LOG] [INFO][Migration] red_alert_channels column already exists in server_settings table
[2025-06-08T05:36:16.749Z] [LOG] [INFO][Migration] red_alert_channels column already exists in server_settings table
[2025-06-08T05:36:16.749Z] [LOG] Creating log_channels table...
[2025-06-08T05:36:16.749Z] [LOG] Created log_channels table
[2025-06-08T05:36:16.749Z] [LOG] [INFO][Database Migration] Log channels table migration completed successfully
[2025-06-08T05:36:16.749Z] [LOG] [INFO][Migration] Notes column already exists in tickets table
[2025-06-08T05:36:16.749Z] [LOG] Creating log_channels table...
[2025-06-08T05:36:16.749Z] [LOG] Created log_channels table
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Log channels table migration completed successfully
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Migration] Notes column already exists in tickets table
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Ticket notes column migration completed successfully
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Adding users table...
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Users table already exists
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Ticket notes column migration completed successfully
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Adding users table...
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Users table already exists
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Database Migration] Users table migration completed successfully
[2025-06-08T05:36:16.750Z] [LOG] [INFO][Migration] last_activity_at column already exists or could not be added
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Status column exists, will use new status values in code
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Created or verified ticket_action_logs table
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Created or verified ticket_staff_activity table
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Successfully completed ticket status migration
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Database Migration] Users table migration completed successfully
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] last_activity_at column already exists or could not be added
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Status column exists, will use new status values in code
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Created or verified ticket_action_logs table
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Created or verified ticket_staff_activity table
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Migration] Successfully completed ticket status migration
[2025-06-08T05:36:16.751Z] [LOG] [INFO][Database Migration] Ticket status migration completed successfully
[2025-06-08T05:36:16.752Z] [LOG] [INFO][Migration] last_activity_at column already exists in tickets table
[2025-06-08T05:36:16.752Z] [LOG] [INFO][Migration] Successfully completed ticket last_activity migration
[2025-06-08T05:36:16.752Z] [LOG] [INFO][Database Migration] Ticket status migration completed successfully
[2025-06-08T05:36:16.752Z] [LOG] [INFO][Migration] last_activity_at column already exists in tickets table
[2025-06-08T05:36:16.752Z] [LOG] [INFO][Migration] Successfully completed ticket last_activity migration
[2025-06-08T05:36:16.752Z] [LOG] [INFO][Database Migration] Ticket last activity column migration completed successfully
[2025-06-08T05:36:16.752Z] [LOG] [INFO][Migration] Successfully created ticket_staff_activity table
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Database Migration] Ticket last activity column migration completed successfully
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Migration] Successfully created ticket_staff_activity table
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Database Migration] Ticket staff activity table migration completed successfully
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Staff Activity Migration] ticket_staff_activity table already exists
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Staff Activity Migration] Migration completed successfully
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Database Migration] Ticket staff activity table migration completed successfully
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Staff Activity Migration] ticket_staff_activity table already exists
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Staff Activity Migration] Migration completed successfully
[2025-06-08T05:36:16.753Z] [LOG] [INFO][Database Migration] Ticket staff activity table creation completed successfully
[2025-06-08T05:36:16.754Z] [LOG] [INFO][Migration] action_type column already exists in ticket_staff_activity table
[2025-06-08T05:36:16.754Z] [LOG] [INFO][Database Migration] Ticket staff activity table creation completed successfully
[2025-06-08T05:36:16.754Z] [LOG] [INFO][Migration] action_type column already exists in ticket_staff_activity table
[2025-06-08T05:36:16.754Z] [LOG] [INFO][Database Migration] Added action_type column to ticket_staff_activity table
[2025-06-08T05:36:16.754Z] [LOG] [INFO][Migration] Successfully created ticket_transcripts table
[2025-06-08T05:36:16.754Z] [LOG] [INFO][Database Migration] Added action_type column to ticket_staff_activity table
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Migration] Successfully created ticket_transcripts table
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Database Migration] Ticket transcripts table migration completed successfully
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Migration] case_number column already exists in tickets table
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Migration] Successfully completed ticket case number migration
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Database Migration] Ticket transcripts table migration completed successfully
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Migration] case_number column already exists in tickets table
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Migration] Successfully completed ticket case number migration
[2025-06-08T05:36:16.755Z] [LOG] [INFO][Database Migration] Ticket case number migration completed successfully
[2025-06-08T05:36:16.756Z] [LOG] [INFO][Migration] deleted column already exists in tickets table
[2025-06-08T05:36:16.756Z] [LOG] [INFO][Migration] Successfully completed soft delete migration
[2025-06-08T05:36:16.756Z] [LOG] [INFO][Database Migration] Ticket case number migration completed successfully
[2025-06-08T05:36:16.756Z] [LOG] [INFO][Migration] deleted column already exists in tickets table
[2025-06-08T05:36:16.756Z] [LOG] [INFO][Migration] Successfully completed soft delete migration
[2025-06-08T05:36:16.756Z] [LOG] [INFO][Database Migration] Ticket soft delete column migration completed successfully
[2025-06-08T05:36:16.757Z] [LOG] [INFO][Migration] dashboard_logs table already exists, checking and adding missing columns...
[2025-06-08T05:36:16.757Z] [LOG] [INFO][Database Migration] Ticket soft delete column migration completed successfully
[2025-06-08T05:36:16.757Z] [LOG] [INFO][Migration] dashboard_logs table already exists, checking and adding missing columns...
[2025-06-08T05:36:16.757Z] [LOG] [INFO][Database Migration] Dashboard logs table migration completed successfully
[2025-06-08T05:36:16.757Z] [LOG] [INFO][Database Migration] Dashboard logs table migration completed successfully
[2025-06-08T05:36:16.758Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:16.758Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:16.758Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
[2025-06-08T05:36:16.758Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:16.758Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:16.758Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database Migration] dm_logs table migration completed successfully
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database] Database migrations completed successfully
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database Migration] dm_logs table migration completed successfully
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database] Database migrations completed successfully
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database] Migrations completed successfully
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database] Server settings updated with channel IDs
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database] Migrations completed successfully
[2025-06-08T05:36:16.759Z] [LOG] [INFO][Database] Server settings updated with channel IDs
[2025-06-08T05:36:16.760Z] [LOG] [INFO][API] API server running successfully on port 3001
[2025-06-08T05:36:16.760Z] [LOG] [API] API URL: http://localhost:3001
[2025-06-08T05:36:16.760Z] [LOG] [WebSocket] WebSocket server running on ws://localhost:3001
[2025-06-08T05:36:16.760Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:16.761Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:16.761Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
[2025-06-08T05:36:16.761Z] [LOG] [INFO][Migration] Current dm_logs columns: id, user_id, bot_id, content, embed_json, components_json, source_command, source_guild_id, created_at, guild_id, sender_id, recipient_id, command, success, error
[2025-06-08T05:36:16.761Z] [LOG] [INFO][Migration] Migrated data from source_guild_id to guild_id
[2025-06-08T05:36:16.761Z] [LOG] [INFO][Migration] Successfully completed dm_logs table migration
